<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_2.1.xsd">

  <grid name="contact-grid" title="Contacts" model="com.axelor.contact.db.Contact" editable="true">
    <hilite background="warning" if="$contains(email, 'gmeil.com')"/>
    <field name="fullName"/>
    <field name="firstName"/>
    <field name="lastName" onChange="com.axelor.contact.web.HelloController:guessEmail"/>
    <field name="email">
      <hilite strong="true" if="$contains(email, 'gmeil.com')"/>
    </field>
    <field name="phone"/>
    <field name="company"/>
    <field name="dateOfBirth">
      <hilite color="danger" strong="true" if="$moment().diff(dateOfBirth, 'years') &lt; 18"/>
    </field>
    <field name="addresses">
      <grid title="Address List">
        <field name="street"/>
        <field name="area"/>
        <field name="city"/>
      </grid>
      <form cols="4" title="Address">
        <field name="street"/>
        <field name="area"/>
        <field name="city"/>
        <field name="zip"/>
        <field name="country"/>
        <button onClick="action-contact-address-about" title="Click Me!" name="clickMe"/>
      </form>
    </field>
  </grid>

  <selection name="phone.type.selection">
    <option value="Mobile">Mobile</option>
    <option value="Office">Office</option>
    <option value="Home">Home</option>
    <option value="Other">Other</option>
  </selection>
  
  <form name="contact-form" title="Contact" model="com.axelor.contact.db.Contact">
    <panel title="Personal">
      <panel x-span="4">
        <field name="image" showTitle="false" x-span="12"/>
      </panel>
      <panel x-span="8">
        <field name="fullName" title="Name" readonly="false" x-span="12">
          <editor>
            <field name="title" widget="SuggestBox" x-span="2"/>
            <field name="firstName" x-span="5"/>
            <field name="lastName" x-span="5"/>
          </editor>
        </field>
      <field name="dateOfBirth" x-span="7"/>
      </panel>
    </panel>
    <panel title="Contacts">
      <field name="emails">
        <viewer><![CDATA[
        <a href="mailto:{{record.email}}">{{record.email}}</a>
        ]]></viewer>
        <editor x-layout="table">
          <field name="email" />
          <field name="primary" widget="toggle" x-icon="fa-star-o" x-icon-active="fa-star" x-exclusive="true" />
          <field name="optOut" widget="toggle" x-icon="fa-ban" />
          <field name="invalid" widget="toggle" x-icon="fa-exclamation-circle" />
        </editor>
      </field>
      <field name="phones">
        <viewer><![CDATA[
        <a href="tel:{{record.phone}}">{{record.phone}}</a> <span class="muted" ng-if="record.phoneType">({{record.phoneType}})</span>
        ]]></viewer>
        <editor x-layout="table">
          <field name="phoneType" x-width="100px" selection="phone.type.selection" />
          <field name="phone" css="border-left-none"/>
          <field name="primary" widget="toggle" x-icon="fa-star-o" x-icon-active="fa-star" x-exclusive="true"/>
        </editor>
      </field>
      <field name="addresses" x-span="12" css="address-list">
        <viewer><![CDATA[
        <address>
        {{record.street}} {{record.area}}<br>
        {{record.city}}, {{record.state}} {{record.zip}}<br>
        {{record.country.name}}
        </address>
        ]]>
        </viewer>
        <editor>
          <field name="street" x-span="12"/>
          <field name="area" x-span="12"/>
          <field name="city" x-span="4"/>
          <field name="state" x-span="4"/>
          <field name="zip" x-span="4"/>
          <field name="country" widget="SuggestBox" x-span="12"/>
        </editor>
      </field>
    </panel>
    <panel title="Notes">
      <field name="notes" showTitle="false" x-span="12"/>
    </panel>
    <panel-side>
      <field name="createdOn"/>
      <field name="updatedOn"/>
    </panel-side>
    <panel-side title="Extra">
      <field name="company"/>
      <field name="circles" widget="TagSelect"/>
    </panel-side>
  </form>

  <action-method name="action-contact-address-about">
    <call class="com.axelor.contact.web.HelloController" method="about"/>
  </action-method>

  <action-attrs name="action-contact-address-attrs">
    <attribute name="title" for="addresses.area" expr="Location" if="lastName == null"/>
    <attribute name="title" for="addresses.area" expr="Area" if="lastName != null"/>
    <attribute name="hidden" for="addresses.zip" expr="lastName == null"/>
  </action-attrs>

</object-views>
