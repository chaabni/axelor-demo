<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_3.0.xsd">

  <selection name="dyn.reference.select">
    <option value="com.axelor.contact.db.Contact" data-domain="self.email LIKE '%gmail%'">Contact</option>
    <option value="com.axelor.sale.db.Order">SaleOrder</option>
  </selection>

  <grid name="dyn-message-grid" title="Messages" model="com.axelor.dyn.db.DynMessage">
    <field name="subject" />
    <field name="date" />
  </grid>

  <form name="dyn-message-form" title="Message" model="com.axelor.dyn.db.DynMessage" cols="2">
    <panel title="Overview" itemSpan="12">
      <field name="subject"/>
      <field name="recipients" widget="TagSelect"/>
      <field name="referenceModel" title="Reference" widget="RefSelect" x-related="referenceId"/>
    </panel>
    <panel-tabs>
      <panel title="Message">
        <field name="body" widget="html" showTitle="false" colSpan="12"/>
      </panel>
      <panel-related field="replies">
        <field name="subject"/>
      </panel-related>
    </panel-tabs>
  </form>

  <form name="dyn-message-form2" title="Message" model="com.axelor.dyn.db.DynMessage" cols="1">
    <group readonly="true" cols="3" colWidths="42,*,60">
      <field name="dummy1" showTitle="false" widget="Image" width="48" height="48" css="trail-avatar"/>
      <group cols="1">
        <field name="subject" showIf="!parent"/>
        <field name="body" widget="html"/>
      </group>
      <group cols="3" colWidths="20,20,20" readonly="false">
        <button name="btnStar" icon="fa-star-o" iconHover="fa-star" link=""/>
        <button name="btnReply" icon="fa-reply" link=""
          onClick="com.axelor.dyn.web.DynController:showReply"/>
        <button name="btnDone" icon="fa-check" link=""/>
      </group>
    </group>
    <group readonly="true" css="trail-form-footer" cols="2" colWidths="*,20">
      <group cols="5" css="pull-left">
        <field name="author" showTitle="false"/>
        <label title="to"/>
        <field name="recipients" showTitle="false" widget="TagSelect" max="3"/>
        <label title=" &amp;nbsp;â€¢"></label>
        <field name="createdOn" widget="RelativeTime" showTitle="false"/>
      </group>
      <button name="btnExpand" icon="fa-angle-double-down" link="" readonly="false"
        onClick="com.axelor.dyn.web.DynController:showReplies" showIf="__expandable"/>
    </group>
    <group cols="3" colWidths="100,100,*" showIf="canReply">
      <field name="reply" showTitle="false" colSpan="3" widget="Text" required="true"/>
      <button name="btnSend" title="Send" readonlyIf="$invalid()"
        onClick="com.axelor.dyn.web.DynController:sendReply"/>
      <button name="btnCancel" title="Cancel"
        onClick="com.axelor.dyn.web.DynController:showReply"/>
      <spacer colSpan="2"/>
    </group>
  </form>

  <form name="dyn-message-form3" title="Message" model="com.axelor.dyn.db.DynMessage" cols="1">
    <field name="subject" required="true"/>
    <field name="recipients" required="true" widget="TagSelect" />
    <field name="reply" widget="Text" required="true" />
    <group cols="2" colWidths="100,*">
      <button name="btnSend" title="Send" readonlyIf="$invalid()"
        onClick="com.axelor.dyn.web.DynController:sendReply"></button>
      <spacer/>
    </group>
  </form>

</object-views>
